<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SfM Learner ç½‘ç»œç»“æ„è¯¦ç»†åˆ†æ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .network-card {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .architecture-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .architecture-table th, .architecture-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .architecture-table th {
            background-color: #007bff;
            color: white;
        }
        .parameter-info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .flow-diagram {
            background: white;
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .layer-box {
            display: inline-block;
            padding: 10px 15px;
            margin: 5px;
            border: 2px solid #007bff;
            border-radius: 5px;
            background: #f8f9fa;
        }
        .arrow {
            font-size: 20px;
            color: #007bff;
            margin: 0 10px;
        }
        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SfM Learner ç½‘ç»œç»“æ„è¯¦ç»†åˆ†æ</h1>
        <p>æœ¬æ–‡æ¡£è¯¦ç»†åˆ†æäº†SfM Learneré¡¹ç›®ä¸­æ‰€æœ‰ç½‘ç»œçš„å®Œæ•´ç»“æ„ï¼ŒåŒ…æ‹¬æ•°æ®æµå˜åŒ–ã€é€šé“å˜åŒ–ã€ç»´åº¦å˜åŒ–å’Œå±‚ç»“æ„ã€‚</p>

        <h2>ğŸ“Š é¡¹ç›®æ¦‚è§ˆ</h2>
        <p>è¯¥é¡¹ç›®åŒ…å«ä»¥ä¸‹ä¸»è¦ç½‘ç»œæ¨¡å—ï¼š</p>
        <ul>
            <li><strong>ResNetEncoder</strong>: ç‰¹å¾æå–ç¼–ç å™¨ï¼ˆResNetæ¶æ„ï¼‰</li>
            <li><strong>DepthDecoder</strong>: æ·±åº¦ä¼°è®¡è§£ç å™¨ï¼ˆU-Netæ¶æ„ï¼‰</li>
            <li><strong>PoseDecoder</strong>: å§¿æ€ä¼°è®¡è§£ç å™¨</li>
            <li><strong>PositionDecoder</strong>: å…‰æµè§£ç å™¨</li>
            <li><strong>TransformDecoder</strong>: å¤–è§‚æµè§£ç å™¨</li>
            <li><strong>PoseCNN</strong>: å§¿æ€ä¼°è®¡CNN</li>
        </ul>

        <h2>ğŸ—ï¸ 1. ResNetEncoder - ç‰¹å¾æå–ç¼–ç å™¨</h2>
        <div class="network-card">
            <h3>1.1 ç½‘ç»œæ¶æ„</h3>
            <p><strong>æ¨¡å‹ç±»å‹</strong>: ResNetå˜ä½“ï¼ˆæ”¯æŒ18/34/50/101/152å±‚ï¼‰</p>
            <p><strong>åŸºç¡€æ¶æ„</strong>: æ ‡å‡†ResNet + å¤šå›¾åƒè¾“å…¥é€‚é…</p>
            
            <h4>æ•°æ®æµå˜åŒ–è¡¨</h4>
            <table class="architecture-table">
                <thead>
                    <tr>
                        <th>é˜¶æ®µ</th>
                        <th>æ“ä½œ</th>
                        <th>è¾“å…¥å°ºå¯¸</th>
                        <th>è¾“å‡ºå°ºå¯¸</th>
                        <th>é€šé“å˜åŒ–</th>
                        <th>å‚æ•°æ•°é‡</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Input</td>
                        <td>åŸå§‹å›¾åƒ</td>
                        <td>[B, CÃ—N, H, W]</td>
                        <td>-</td>
                        <td>CÃ—N (N=å›¾åƒæ•°é‡)</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Conv1</td>
                        <td>7Ã—7å·ç§¯, stride=2</td>
                        <td>[B, CÃ—N, H, W]</td>
                        <td>[B, 64, H/2, W/2]</td>
                        <td>CÃ—N â†’ 64</td>
                        <td>7Ã—7Ã—CÃ—NÃ—64</td>
                    </tr>
                    <tr>
                        <td>MaxPool</td>
                        <td>3Ã—3æœ€å¤§æ± åŒ–, stride=2</td>
                        <td>[B, 64, H/2, W/2]</td>
                        <td>[B, 64, H/4, W/4]</td>
                        <td>64 â†’ 64</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Layer1</td>
                        <td>ResNet Stage1</td>
                        <td>[B, 64, H/4, W/4]</td>
                        <td>[B, 64, H/4, W/4]</td>
                        <td>64 â†’ 64</td>
                        <td>ResNet18: ~37K</td>
                    </tr>
                    <tr>
                        <td>Layer2</td>
                        <td>ResNet Stage2</td>
                        <td>[B, 64, H/4, W/4]</td>
                        <td>[B, 128, H/8, W/8]</td>
                        <td>64 â†’ 128</td>
                        <td>ResNet18: ~220K</td>
                    </tr>
                    <tr>
                        <td>Layer3</td>
                        <td>ResNet Stage3</td>
                        <td>[B, 128, H/8, W/8]</td>
                        <td>[B, 256, H/16, W/16]</td>
                        <td>128 â†’ 256</td>
                        <td>ResNet18: ~440K</td>
                    </tr>
                    <tr>
                        <td>Layer4</td>
                        <td>ResNet Stage4</td>
                        <td>[B, 256, H/16, W/16]</td>
                        <td>[B, 512, H/32, W/32]</td>
                        <td>256 â†’ 512</td>
                        <td>ResNet18: ~880K</td>
                    </tr>
                </tbody>
            </table>

            <div class="parameter-info">
                <strong>ResNet18é€šé“é…ç½®</strong>: [64, 64, 128, 256, 512]<br>
                <strong>ResNet50é€šé“é…ç½®</strong>: [64, 256, 512, 1024, 2048] (BottleneckÃ—4)<br>
                <strong>æ€»å‚æ•°é‡</strong>: ResNet18çº¦11.2Mï¼ŒResNet50çº¦23.5M
            </div>
        </div>

        <h2>ğŸ” 2. DepthDecoder - æ·±åº¦ä¼°è®¡è§£ç å™¨</h2>
        <div class="network-card">
            <h3>2.1 æ¶æ„æ¦‚è§ˆ</h3>
            <p><strong>æ¨¡å‹ç±»å‹</strong>: U-Neté£æ ¼è§£ç å™¨</p>
            <p><strong>ä¸Šé‡‡æ ·æ–¹å¼</strong>: æœ€è¿‘é‚»æ’å€¼ (2Ã—ä¸Šé‡‡æ ·)</p>
            <p><strong>è·³è·ƒè¿æ¥</strong>: èåˆç¼–ç å™¨å¯¹åº”å±‚ç‰¹å¾</p>

            <h4>è¯¦ç»†ç»“æ„è¡¨</h4>
            <table class="architecture-table">
                <thead>
                    <tr>
                        <th>è§£ç é˜¶æ®µ</th>
                        <th>è¾“å…¥å°ºå¯¸</th>
                        <th>æ“ä½œ</th>
                        <th>è¾“å‡ºå°ºå¯¸</th>
                        <th>é€šé“å˜åŒ–</th>
                        <th>æ˜¯å¦è·³è·ƒè¿æ¥</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Stage4</td>
                        <td>[B, 512, H/32, W/32]</td>
                        <td>ConvBlock + Upsample</td>
                        <td>[B, 256, H/16, W/16]</td>
                        <td>512 â†’ 256</td>
                        <td>âœ“ (Layer3ç‰¹å¾)</td>
                    </tr>
                    <tr>
                        <td>Stage3</td>
                        <td>[B, 256+256, H/16, W/16]</td>
                        <td>ConvBlock + Upsample</td>
                        <td>[B, 128, H/8, W/8]</td>
                        <td>512 â†’ 128</td>
                        <td>âœ“ (Layer2ç‰¹å¾)</td>
                    </tr>
                    <tr>
                        <td>Stage2</td>
                        <td>[B, 128+128, H/8, W/8]</td>
                        <td>ConvBlock + Upsample</td>
                        <td>[B, 64, H/4, W/4]</td>
                        <td>256 â†’ 64</td>
                        <td>âœ“ (Layer1ç‰¹å¾)</td>
                    </tr>
                    <tr>
                        <td>Stage1</td>
                        <td>[B, 64+64, H/4, W/4]</td>
                        <td>ConvBlock + Upsample</td>
                        <td>[B, 32, H/2, W/2]</td>
                        <td>128 â†’ 32</td>
                        <td>âœ“ (Conv1ç‰¹å¾)</td>
                    </tr>
                    <tr>
                        <td>Stage0</td>
                        <td>[B, 32+64, H/2, W/2]</td>
                        <td>ConvBlock + Upsample</td>
                        <td>[B, 16, H, W]</td>
                        <td>96 â†’ 16</td>
                        <td>Ã—</td>
                    </tr>
                </tbody>
            </table>

            <h4>è¾“å‡ºå±‚é…ç½®</h4>
            <div class="code-block">
# å¤šå°ºåº¦æ·±åº¦è¾“å‡º
("disp", 0): [B, 1, H, W]      # æœ€é«˜åˆ†è¾¨ç‡
("disp", 1): [B, 1, H/2, W/2]  # 1/2åˆ†è¾¨ç‡
("disp", 2): [B, 1, H/4, W/4]  # 1/4åˆ†è¾¨ç‡
("disp", 3): [B, 1, H/8, W/8]  # 1/8åˆ†è¾¨ç‡
            </div>
        </div>

        <h2>ğŸ¯ 3. PoseDecoder - å§¿æ€ä¼°è®¡è§£ç å™¨</h2>
        <div class="network-card">
            <h3>3.1 æ¶æ„ç‰¹ç‚¹</h3>
            <p><strong>è¾“å…¥</strong>: ç¼–ç å™¨æœ€åä¸€å±‚ç‰¹å¾</p>
            <p><strong>è¾“å‡º</strong>: ç›¸æœºå§¿æ€å‚æ•°ï¼ˆè½´è§’+å¹³ç§»ï¼‰</p>

            <h4>ç½‘ç»œç»“æ„</h4>
            <div class="flow-diagram">
                <div class="layer-box">è¾“å…¥ç‰¹å¾<br>[B, C, H/32, W/32]</div>
                <span class="arrow">â†’</span>
                <div class="layer-box">1Ã—1å·ç§¯<br>Squeeze 256é€šé“</div>
                <span class="arrow">â†’</span>
                <div class="layer-box">3Ã—3å·ç§¯<br>256é€šé“</div>
                <span class="arrow">â†’</span>
                <div class="layer-box">3Ã—3å·ç§¯<br>256é€šé“</div>
                <span class="arrow">â†’</span>
                <div class="layer-box">1Ã—1å·ç§¯<br>6Ã—(N-1)é€šé“</div>
                <span class="arrow">â†’</span>
                <div class="layer-box">å…¨å±€å¹³å‡æ± åŒ–</div>
            </div>

            <table class="architecture-table">
                <thead>
                    <tr>
                        <th>å±‚å</th>
                        <th>æ“ä½œ</th>
                        <th>è¾“å…¥é€šé“</th>
                        <th>è¾“å‡ºé€šé“</th>
                        <th>æ ¸å¤§å°</th>
                        <th>æ­¥é•¿</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Squeeze</td>
                        <td>Conv2d</td>
                        <td>512 (ResNet18)</td>
                        <td>256</td>
                        <td>1Ã—1</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>Pose_0</td>
                        <td>Conv2d</td>
                        <td>256Ã—N</td>
                        <td>256</td>
                        <td>3Ã—3</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>Pose_1</td>
                        <td>Conv2d</td>
                        <td>256</td>
                        <td>256</td>
                        <td>3Ã—3</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>Pose_2</td>
                        <td>Conv2d</td>
                        <td>256</td>
                        <td>6Ã—(N-1)</td>
                        <td>1Ã—1</td>
                        <td>1</td>
                    </tr>
                </tbody>
            </table>

            <div class="parameter-info">
                <strong>è¾“å‡ºæ ¼å¼</strong>:<br>
                - axisangle: [B, N-1, 1, 3] (è½´è§’è¡¨ç¤ºçš„æ—‹è½¬)<br>
                - translation: [B, N-1, 1, 3] (å¹³ç§»å‘é‡)
            </div>
        </div>

        <h2>ğŸŒŠ 4. PositionDecoder - å…‰æµè§£ç å™¨</h2>
        <div class="network-card">
            <h3>4.1 ä¸DepthDecoderçš„å¯¹æ¯”</h3>
            <table class="architecture-table">
                <thead>
                    <tr>
                        <th>ç‰¹æ€§</th>
                        <th>DepthDecoder</th>
                        <th>PositionDecoder</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>è¾“å‡ºé€šé“</td>
                        <td>1 (æ·±åº¦å›¾)</td>
                        <td>2 (å…‰æµx,y)</td>
                    </tr>
                    <tr>
                        <td>æ¿€æ´»å‡½æ•°</td>
                        <td>Sigmoid</td>
                        <td>æ— æ¿€æ´»å‡½æ•°</td>
                    </tr>
                    <tr>
                        <td>è¾“å‡ºèŒƒå›´</td>
                        <td>[0, 1]</td>
                        <td>[-âˆ, +âˆ]</td>
                    </tr>
                    <tr>
                        <td>æƒé‡åˆå§‹åŒ–</td>
                        <td>é»˜è®¤åˆå§‹åŒ–</td>
                        <td>N(0, 1e-5)</td>
                    </tr>
                </tbody>
            </table>

            <h4>å…‰æµè¾“å‡ºç»“æ„</h4>
            <div class="code-block">
# å¤šå°ºåº¦å…‰æµè¾“å‡º
("position", 0): [B, 2, H, W]      # æœ€é«˜åˆ†è¾¨ç‡å…‰æµ
("position", 1): [B, 2, H/2, W/2]  # 1/2åˆ†è¾¨ç‡å…‰æµ
("position", 2): [B, 2, H/4, W/4]  # 1/4åˆ†è¾¨ç‡å…‰æµ
("position", 3): [B, 2, H/8, W/8]  # 1/8åˆ†è¾¨ç‡å…‰æµ
            </div>
        </div>

        <h2>ğŸ¨ 5. TransformDecoder - å¤–è§‚æµè§£ç å™¨</h2>
        <div class="network-card">
            <h3>5.1 æ¶æ„ç‰¹ç‚¹</h3>
            <p><strong>åŠŸèƒ½</strong>: é¢„æµ‹å¤–è§‚å˜åŒ–/å˜å½¢åœº</p>
            <p><strong>è¾“å‡º</strong>: 3é€šé“å˜æ¢å‚æ•°</p>
            <p><strong>æ¿€æ´»å‡½æ•°</strong>: Tanh (é™åˆ¶è¾“å‡ºèŒƒå›´[-1, 1])</p>

            <h4>ç½‘ç»œé…ç½®</h4>
            <div class="parameter-info">
                <strong>è¾“å‡ºé€šé“</strong>: 3 (RGBå˜æ¢å‚æ•°)<br>
                <strong>è¾“å‡ºèŒƒå›´</strong>: [-1, 1] (é€šè¿‡Tanhæ¿€æ´»)<br>
                <strong>è§£ç å™¨é€šé“</strong>: [16, 32, 64, 128, 256] (ä¸DepthDecoderç›¸åŒ)
            </div>
        </div>

        <h2>ğŸ“ 6. PoseCNN - å§¿æ€ä¼°è®¡CNN</h2>
        <div class="network-card">
            <h3>6.1 æ¶æ„ç‰¹ç‚¹</h3>
            <p><strong>è¾“å…¥</strong>: å¤šå¸§å›¾åƒæ‹¼æ¥</p>
            <p><strong>æ¶æ„</strong>: æ ‡å‡†CNNï¼Œæ— è·³è·ƒè¿æ¥</p>
            <p><strong>è¾“å‡º</strong>: ç›¸æœºå§¿æ€å‚æ•°</p>

            <h4>è¯¦ç»†ç»“æ„</h4>
            <table class="architecture-table">
                <thead>
                    <tr>
                        <th>å±‚</th>
                        <th>æ“ä½œ</th>
                        <th>è¾“å…¥é€šé“</th>
                        <th>è¾“å‡ºé€šé“</th>
                        <th>æ ¸å¤§å°</th>
                        <th>æ­¥é•¿</th>
                        <th>è¾“å‡ºå°ºå¯¸</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Conv0</td>
                        <td>Conv2d</td>
                        <td>3Ã—N</td>
                        <td>16</td>
                        <td>7Ã—7</td>
                        <td>2</td>
                        <td>[B, 16, H/2, W/2]</td>
                    </tr>
                    <tr>
                        <td>Conv1</td>
                        <td>Conv2d</td>
                        <td>16</td>
                        <td>32</td>
                        <td>5Ã—5</td>
                        <td>2</td>
                        <td>[B, 32, H/4, W/4]</td>
                    </tr>
                    <tr>
                        <td>Conv2</td>
                        <td>Conv2d</td>
                        <td>32</td>
                        <td>64</td>
                        <td>3Ã—3</td>
                        <td>2</td>
                        <td>[B, 64, H/8, W/8]</td>
                    </tr>
                    <tr>
                        <td>Conv3</td>
                        <td>Conv2d</td>
                        <td>64</td>
                        <td>128</td>
                        <td>3Ã—3</td>
                        <td>2</td>
                        <td>[B, 128, H/16, W/16]</td>
                    </tr>
                    <tr>
                        <td>Conv4</td>
                        <td>Conv2d</td>
                        <td>128</td>
                        <td>256</td>
                        <td>3Ã—3</td>
                        <td>2</td>
                        <td>[B, 256, H/32, W/32]</td>
                    </tr>
                    <tr>
                        <td>Conv5</td>
                        <td>Conv2d</td>
                        <td>256</td>
                        <td>256</td>
                        <td>3Ã—3</td>
                        <td>2</td>
                        <td>[B, 256, H/64, W/64]</td>
                    </tr>
                    <tr>
                        <td>Conv6</td>
                        <td>Conv2d</td>
                        <td>256</td>
                        <td>256</td>
                        <td>3Ã—3</td>
                        <td>2</td>
                        <td>[B, 256, H/128, W/128]</td>
                    </tr>
                    <tr>
                        <td>PoseConv</td>
                        <td>Conv2d</td>
                        <td>256</td>
                        <td>6Ã—(N-1)</td>
                        <td>1Ã—1</td>
                        <td>1</td>
                        <td>[B, 6Ã—(N-1), H/128, W/128]</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h2>ğŸ”§ 7. æ ¸å¿ƒå±‚ç»„ä»¶åˆ†æ</h2>
        <div class="network-card">
            <h3>7.1 ConvBlock ç»“æ„</h3>
            <div class="code-block">
ConvBlock(
    â”œâ”€â”€ Conv3x3(in_channels, out_channels)
    â”‚   â”œâ”€â”€ ReflectionPad2d(1)  # ä¿æŒå°ºå¯¸
    â”‚   â””â”€â”€ Conv2d(3, 3, kernel_size=3)
    â””â”€â”€ ELU(inplace=True)      # æ¿€æ´»å‡½æ•°
)
            </div>

            <h3>7.2 ä¸Šé‡‡æ ·æ“ä½œ</h3>
            <div class="code-block">
upsample(x):
    return F.interpolate(x, scale_factor=2, mode="nearest")
# æœ€è¿‘é‚»æ’å€¼ï¼Œ2å€ä¸Šé‡‡æ ·
            </div>

            <h3>7.3 è·³è·ƒè¿æ¥æœºåˆ¶</h3>
            <div class="code-block">
# ç‰¹å¾èåˆè¿‡ç¨‹
features = [upsampled_features]
if use_skips and i > 0:
    features += [skip_connection_features]
x = torch.cat(features, dim=1)  # é€šé“ç»´åº¦æ‹¼æ¥
            </div>
        </div>

        <h2>ğŸ“Š 8. ç½‘ç»œå‚æ•°ç»Ÿè®¡</h2>
        <div class="network-card">
            <h3>8.1 å„ç½‘ç»œå‚æ•°é‡å¯¹æ¯”</h3>
            <table class="architecture-table">
                <thead>
                    <tr>
                        <th>ç½‘ç»œåç§°</th>
                        <th>å‚æ•°é‡(ä¼°ç®—)</th>
                        <th>è¾“å…¥é€šé“</th>
                        <th>è¾“å‡ºé€šé“</th>
                        <th>ä¸»è¦ç”¨é€”</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ResNetEncoder-18</td>
                        <td>11.2M</td>
                        <td>3Ã—N</td>
                        <td>[64,64,128,256,512]</td>
                        <td>ç‰¹å¾æå–</td>
                    </tr>
                    <tr>
                        <td>ResNetEncoder-50</td>
                        <td>23.5M</td>
                        <td>3Ã—N</td>
                        <td>[64,256,512,1024,2048]</td>
                        <td>ç‰¹å¾æå–</td>
                    </tr>
                    <tr>
                        <td>DepthDecoder</td>
                        <td>~1.5M</td>
                        <td>512</td>
                        <td>4å°ºåº¦æ·±åº¦å›¾</td>
                        <td>æ·±åº¦ä¼°è®¡</td>
                    </tr>
                    <tr>
                        <td>PoseDecoder</td>
                        <td>~0.3M</td>
                        <td>512Ã—N</td>
                        <td>6Ã—(N-1)</td>
                        <td>å§¿æ€ä¼°è®¡</td>
                    </tr>
                    <tr>
                        <td>PositionDecoder</td>
                        <td>~1.5M</td>
                        <td>512</td>
                        <td>4å°ºåº¦å…‰æµ</td>
                        <td>å…‰æµä¼°è®¡</td>
                    </tr>
                    <tr>
                        <td>TransformDecoder</td>
                        <td>~1.5M</td>
                        <td>512</td>
                        <td>4å°ºåº¦å˜æ¢</td>
                        <td>å¤–è§‚å˜æ¢</td>
                    </tr>
                    <tr>
                        <td>PoseCNN</td>
                        <td>~0.5M</td>
                        <td>3Ã—N</td>
                        <td>6Ã—(N-1)</td>
                        <td>å§¿æ€ä¼°è®¡(CNN)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h2>ğŸ”„ 9. æ•°æ®æµæ€»ç»“</h2>
        <div class="network-card">
            <h3>9.1 å®Œæ•´æ•°æ®æµ</h3>
            <div class="flow-diagram">
                <div class="layer-box">è¾“å…¥å›¾åƒ<br>[B,3Ã—N,H,W]</div>
                <span class="arrow">â†’</span>
                <div class="layer-box">ResNetEncoder<br>å¤šå°ºåº¦ç‰¹å¾</div>
                <span class="arrow">â†’</span>
                <div class="layer-box">è§£ç å™¨ç½‘ç»œ<br>(Depth/Pose/Flow)</div>
                <span class="arrow">â†’</span>
                <div class="layer-box">å¤šå°ºåº¦è¾“å‡º<br>æ·±åº¦/å§¿æ€/å…‰æµ</div>
            </div>

            <h3>9.2 ç‰¹å¾ç»´åº¦å˜åŒ–æ€»ç»“</h3>
            <div class="code-block">
# ä»¥è¾“å…¥256Ã—320ä¸ºä¾‹çš„å®Œæ•´æ•°æ®æµ

# 1. ResNetEncoderè¾“å‡º
features[0]: [B, 64, 128, 160]   # 1/2åˆ†è¾¨ç‡
features[1]: [B, 64, 64, 80]     # 1/4åˆ†è¾¨ç‡  
features[2]: [B, 128, 32, 40]    # 1/8åˆ†è¾¨ç‡
features[3]: [B, 256, 16, 20]    # 1/16åˆ†è¾¨ç‡
features[4]: [B, 512, 8, 10]     # 1/32åˆ†è¾¨ç‡

# 2. DepthDecoderè¾“å‡º
("disp", 0): [B, 1, 256, 320]    # å…¨åˆ†è¾¨ç‡æ·±åº¦
("disp", 1): [B, 1, 128, 160]    # 1/2åˆ†è¾¨ç‡æ·±åº¦
("disp", 2): [B, 1, 64, 80]      # 1/4åˆ†è¾¨ç‡æ·±åº¦
("disp", 3): [B, 1, 32, 40]      # 1/8åˆ†è¾¨ç‡æ·±åº¦
            </div>
        </div>

        <h2>ğŸ“ 10. ä½¿ç”¨ç¤ºä¾‹</h2>
        <div class="network-card">
            <h3>10.1 ç½‘ç»œåˆå§‹åŒ–ç¤ºä¾‹</h3>
            <div class="code-block">
import torch
from networks import ResnetEncoder, DepthDecoder, PoseDecoder

# ç½‘ç»œåˆå§‹åŒ–
encoder = ResnetEncoder(num_layers=18, pretrained=True, num_input_images=2)
depth_decoder = DepthDecoder(encoder.num_ch_enc, scales=range(4))
pose_decoder = PoseDecoder(encoder.num_ch_enc, num_input_features=2)

# å‰å‘ä¼ æ’­
input_images = torch.randn(1, 6, 256, 320)  # 2å¼ RGBå›¾åƒæ‹¼æ¥
features = encoder(input_images)
depth_outputs = depth_decoder(features)
axisangle, translation = pose_decoder([features])

# è¾“å‡ºç»“æœ
print("Depth scales:", [depth_outputs[("disp", i)].shape for i in range(4)])
print("Pose shape:", axisangle.shape, translation.shape)
            </div>
        </div>

        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; text-align: center; color: #666;">
            <p>Â© 2024 SfM Learner Network Analysis | è¯¦ç»†ç½‘ç»œç»“æ„åˆ†ææ–‡æ¡£</p>
        </footer>
    </div>
</body>
</html>