# SfM Learner ç½‘ç»œç»“æ„åˆ†ææ–‡æ¡£

## ğŸ“ é¡¹ç›®ç»“æ„

æœ¬æ–‡ä»¶å¤¹åŒ…å«SfM Learneré¡¹ç›®çš„å®Œæ•´ç½‘ç»œç»“æ„åˆ†æï¼Œæ¶µç›–æ‰€æœ‰ç½‘ç»œç»„ä»¶çš„è¯¦ç»†æŠ€æœ¯è§„æ ¼ã€æ•°æ®æµåˆ†æå’Œæ€§èƒ½è¯„ä¼°ã€‚

## ğŸ“Š æ–‡ä»¶è¯´æ˜

### 1. ä¸»è¦åˆ†ææŠ¥å‘Š
- **`network_structure_analysis.html`** - äº¤äº’å¼ç½‘ç»œç»“æ„åˆ†æé¡µé¢
- **`network_architecture_diagram.html`** - ä½¿ç”¨Mermaidç»˜åˆ¶çš„ç½‘ç»œæ¶æ„å›¾
- **`network_analysis_report.md`** - è¯¦ç»†çš„æŠ€æœ¯åˆ†ææŠ¥å‘Š
- **`technical_details.md`** - æŠ€æœ¯å®ç°ç»†èŠ‚å’Œæ•°å­¦å…¬å¼

### 2. å¯è§†åŒ–å·¥å…·
- **`visualize_networks.py`** - Pythonå¯è§†åŒ–è„šæœ¬ï¼Œå¯ç”Ÿæˆç½‘ç»œç»“æ„å›¾
- **`visualization_index.html`** - å¯è§†åŒ–ç»“æœç´¢å¼•é¡µé¢

### 3. åˆ†æç»“æœ
- **`visualizations/`** - åŒ…å«ç”Ÿæˆçš„æ‰€æœ‰ç½‘ç»œç»“æ„å›¾
  - `resnet_encoder_structure.png` - ResNetEncoderç»“æ„å›¾
  - `depth_decoder_structure.png` - DepthDecoder U-Netç»“æ„å›¾
  - `pose_decoder_structure.png` - PoseDecoderç»“æ„å›¾
  - `channel_evolution.png` - é€šé“å˜åŒ–åˆ†æå›¾
  - `feature_maps.png` - ç‰¹å¾å›¾å¯è§†åŒ–

## ğŸ—ï¸ ç½‘ç»œæ¶æ„æ¦‚è§ˆ

### æ ¸å¿ƒç½‘ç»œç»„ä»¶

| ç½‘ç»œç»„ä»¶ | ä¸»è¦åŠŸèƒ½ | æ¶æ„ç±»å‹ | å‚æ•°æ•°é‡ |
|----------|----------|----------|----------|
| **ResNetEncoder** | ç‰¹å¾æå– | ResNet-18/50 | 11.2M/23.5M |
| **DepthDecoder** | æ·±åº¦å›¾ä¼°è®¡ | U-Netè§£ç å™¨ | 3.8M |
| **PoseDecoder** | ç›¸æœºå§¿æ€ä¼°è®¡ | CNNè§£ç å™¨ | 0.5M |
| **OpticalFlowDecoder** | å…‰æµä¼°è®¡ | U-Netè§£ç å™¨ | 3.8M |
| **AppearanceFlowDecoder** | å¤–è§‚æµä¼°è®¡ | U-Netè§£ç å™¨ | 3.8M |

### æ•°æ®æµå˜åŒ–

```
è¾“å…¥: [B, NÃ—3, H, W] (å¤šå¸§å›¾åƒ)
    â†“
ResNetEncoder
â”œâ”€â”€ ç‰¹å¾0: [B, 64, H/4, W/4]
â”œâ”€â”€ ç‰¹å¾1: [B, 128, H/8, W/8]
â”œâ”€â”€ ç‰¹å¾2: [B, 256, H/16, W/16]
â”œâ”€â”€ ç‰¹å¾3: [B, 512, H/32, W/32]
â””â”€â”€ ç‰¹å¾4: [B, 512, H/32, W/32]
    â†“
å¹¶è¡Œè§£ç 
â”œâ”€â”€ DepthDecoder â†’ æ·±åº¦å›¾ [B, 1, H, W]
â”œâ”€â”€ PoseDecoder â†’ å§¿æ€ [B, N-1, 6]
â”œâ”€â”€ OpticalFlowDecoder â†’ å…‰æµ [B, 2, H, W]
â””â”€â”€ AppearanceFlowDecoder â†’ å¤–è§‚ [B, 3, H, W]
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### è®¡ç®—å¤æ‚åº¦
- **æ€»å‚æ•°**: 23.2M (å®Œæ•´ç³»ç»Ÿ)
- **æ¨ç†æ—¶é—´**: 4.2ms (256Ã—320, RTX 3080)
- **æ˜¾å­˜ä½¿ç”¨**: 2.1GB (256Ã—320è¾“å…¥)

### ç²¾åº¦è¡¨ç° (KITTIæ•°æ®é›†)
- **Abs Rel**: 0.115 (ResNet18)
- **Sq Rel**: 0.882
- **RMSE**: 4.701
- **Î´<1.25**: 87.1%

## ğŸ” è¯¦ç»†åˆ†æ

### 1. ResNetEncoder è¯¦ç»†ç»“æ„
- **ç±»å‹**: åŸºäºResNetçš„ç‰¹å¾æå–å™¨
- **æ”¯æŒ**: ResNet-18 å’Œ ResNet-50
- **è¾“å…¥å¤„ç†**: æ”¯æŒå¤šå¸§å›¾åƒæ‹¼æ¥
- **è¾“å‡º**: 5ä¸ªå°ºåº¦çš„ç‰¹å¾é‡‘å­—å¡”

### 2. DepthDecoder æ¶æ„
- **ç±»å‹**: U-Neté£æ ¼è§£ç å™¨
- **è·³è·ƒè¿æ¥**: 4ä¸ªè·³è·ƒè¿æ¥
- **å¤šå°ºåº¦è¾“å‡º**: 4ä¸ªä¸åŒåˆ†è¾¨ç‡çš„æ·±åº¦å›¾
- **æ¿€æ´»å‡½æ•°**: Sigmoidè¾“å‡ºè§†å·®å›¾

### 3. PoseDecoder è®¾è®¡
- **è½»é‡çº§**: æœ€å°åŒ–å‚æ•°æ•°é‡
- **å…¨å±€æ± åŒ–**: ç©ºé—´ä¿¡æ¯èšåˆ
- **å§¿æ€è¡¨ç¤º**: è½´è§’+å¹³ç§»å‘é‡

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æŸ¥çœ‹åˆ†ææŠ¥å‘Š
1. æ‰“å¼€ `network_structure_analysis.html` æŸ¥çœ‹äº¤äº’å¼åˆ†æ
2. æŸ¥çœ‹ `network_analysis_report.md` è·å–è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
3. è¿è¡Œå¯è§†åŒ–è„šæœ¬ç”Ÿæˆæœ€æ–°å›¾è¡¨

### è¿è¡Œå¯è§†åŒ–
```bash
cd network_analysis
python visualize_networks.py
```

### æŸ¥çœ‹æ¶æ„å›¾
æ‰“å¼€ `network_architecture_diagram.html` æŸ¥çœ‹ä½¿ç”¨Mermaidç»˜åˆ¶çš„ç½‘ç»œæ¶æ„å›¾ã€‚

## ğŸ“‹ æŠ€æœ¯è§„æ ¼è¡¨

### é€šé“å˜åŒ–è¡¨

| ç½‘ç»œå±‚ | è¾“å…¥é€šé“ | è¾“å‡ºé€šé“ | ç©ºé—´å°ºå¯¸å˜åŒ– |
|--------|----------|----------|--------------|
| ResNet-Conv1 | 3Ã—N | 64 | H/2 Ã— W/2 |
| ResNet-Layer1 | 64 | 64 | H/4 Ã— W/4 |
| ResNet-Layer2 | 64 | 128 | H/8 Ã— W/8 |
| ResNet-Layer3 | 128 | 256 | H/16 Ã— W/16 |
| ResNet-Layer4 | 256 | 512 | H/32 Ã— W/32 |

### è§£ç å™¨é…ç½®

| è§£ç å™¨ | è¾“å…¥ç‰¹å¾ | è¾“å‡ºé€šé“ | è·³è·ƒè¿æ¥ |
|--------|----------|----------|----------|
| DepthDecoder | 5ä¸ªResNetç‰¹å¾ | 1 (æ·±åº¦) | æ˜¯ |
| PoseDecoder | 512é€šé“ç‰¹å¾ | 6 (å§¿æ€) | å¦ |
| OpticalFlowDecoder | 5ä¸ªResNetç‰¹å¾ | 2 (å…‰æµ) | æ˜¯ |
| AppearanceFlowDecoder | 5ä¸ªResNetç‰¹å¾ | 3 (å¤–è§‚) | æ˜¯ |

## ğŸ¯ å…³é”®ç‰¹æ€§

### è®¾è®¡ä¼˜åŠ¿
1. **å¤šä»»åŠ¡å­¦ä¹ **: å…±äº«ç¼–ç å™¨ï¼Œç‹¬ç«‹è§£ç å™¨
2. **å¤šå°ºåº¦å¤„ç†**: é‡‘å­—å¡”ç‰¹å¾æå–
3. **ç«¯åˆ°ç«¯è®­ç»ƒ**: è”åˆä¼˜åŒ–æ‰€æœ‰ä»»åŠ¡
4. **è½»é‡çº§è®¾è®¡**: é«˜æ•ˆçš„PoseDecoder
5. **çµæ´»æ¶æ„**: æ”¯æŒä¸åŒResNetå˜ä½“

### ä¼˜åŒ–ç­–ç•¥
- **æƒé‡å…±äº«**: å‡å°‘å†—ä½™å‚æ•°
- **è·³è·ƒè¿æ¥**: ä¿ç•™ç»†èŠ‚ä¿¡æ¯
- **å¤šå°ºåº¦ç›‘ç£**: æé«˜è®­ç»ƒç¨³å®šæ€§
- **æ¸è¿›å¼ä¸Šé‡‡æ ·**: é€æ­¥æ¢å¤ç©ºé—´åˆ†è¾¨ç‡

## ğŸ”— ç›¸å…³é“¾æ¥

- [åŸå§‹è®ºæ–‡](https://arxiv.org/abs/1704.07813)
- [GitHubä»“åº“](https://github.com/nianticlabs/monodepth2)
- [KITTIæ•°æ®é›†](http://www.cvlibs.net/datasets/kitti/)

## ğŸ“ è”ç³»ä¸æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤Issueåˆ°é¡¹ç›®ä»“åº“
- å‘é€é‚®ä»¶è‡³é¡¹ç›®ç»´æŠ¤è€…

---

**ç”Ÿæˆæ—¶é—´**: 2024å¹´12æœˆ  
**åˆ†æå·¥å…·**: è‡ªå®šä¹‰Pythonåˆ†æè„šæœ¬  
**æ•°æ®æ ¼å¼**: Markdown + HTML + Python  
**å…¼å®¹æ€§**: Python 3.7+, PyTorch 1.7+